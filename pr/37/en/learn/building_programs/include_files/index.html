
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Include files and modules &#8212; Fortran Programming Language</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="icon" sizes="256x256" type="image/ico" href="../../../_static/images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" /> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
    var pr_number = -1;
    $(document).ready(function () {

        if (window.location.href.indexOf("/pr/") > -1) {
            pr_number = window.location.href.split('/').indexOf("pr") + 1;
            document.getElementById("pr").innerHTML = "pull request " + window.location.href.split('/')[pr_number];
            document.getElementById("pr").href = "https://github.com/fortran-lang/webpage/pull/" + window.location.href.split('/')[pr_number];
            var banner = document.getElementById("banner");
            banner.style.display = "block";
        }
    });
</script>
<div id="banner" style='display:none' class="container">
    <h3>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="feather feather-git-pull-request">
            <circle cx="18" cy="18" r="3"></circle>
            <circle cx="6" cy="6" r="3"></circle>
            <path d="M13 6h3a2 2 0 0 1 2 2v7"></path>
            <line x1="6" y1="9" x2="6" y2="21"></line>
        </svg>
        <b>Site preview: </b>you are previewing unpublished changes for <a id="pr"></a>
    </h3>
</div> 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../news/atom.xml"
  title="Blog"
/>
 
<link href="True" rel="stylesheet" />

<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../../">
  
  
  
  
    <img src="../../../_static/fortran-logo-256x256.png" class="logo__image only-light" alt="Logo image">
    <img src="../../../_static/fortran-logo-256x256.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class=" collapse navbar-collapse">
    <div id="navbar-center" class="ml-auto">
      
      <div class="navbar-center-item">
        <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
   <div class="container-xl">
      <div id="navbar-start">
         <a class="navbar-brand" href="../../../index.html">
            <img src="../../../_static/images/fortran-logo-256x256.png" class="logo" alt="logo">
         </a>
      </div>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible"
         aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
         <span class="navbar-toggler-icon"></span>
      </button>
      <div id="navbar-collapsible" class=" collapse navbar-collapse">
         <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
            <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
            <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
            <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
         </span>

         <div class="dropdown" id="version_switcher">
            <button type="button" class="btn btn-sm navbar-btn dropdown-toggle" id="version_switcher_button"
               data-toggle="dropdown">
               language
               <span class="caret"></span>
            </button>
            <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0"
               aria-labelledby="version_switcher_button">
               <a class="list-group-item list-group-item-action py-1"
                  href="../../../../de/learn/building_programs/include_"><span>de</span></a>
               <a class="list-group-item list-group-item-action py-1"
                  href="../../../../en/learn/building_programs/include_"><span>en</span></a>
               <a class="list-group-item list-group-item-action py-1"
                  href="../../../../es/learn/building_programs/include_"><span>es</span></a>
               <a class="list-group-item list-group-item-action py-1"
                  href="../../../../fr/learn/building_programs/include_"><span>fr</span></a>
               <a class="list-group-item list-group-item-action py-1"
                  href="../../../../ja/learn/building_programs/include_"><span>ja</span></a>
               <a class="list-group-item list-group-item-action py-1"
                  href="../../../../nl/learn/building_programs/include_"><span>nl</span></a>
               <a class="list-group-item list-group-item-action py-1"
                  href="../../../../zh_CN/learn/building_programs/include_"><span>zh_CN</span></a>
               <a class="list-group-item list-group-item-action py-1"
                  href="../../../../pt/learn/building_programs/include_"><span>pt</span></a>
            </div>
            
         </div>

         <div id="navbar-center" class="ml-auto">
            <div class="navbar-center-item">
               <ul id="navbar-main-elements" class="navbar-nav">
                  <li class="toctree-l1 nav-item">
                     <a class="reference internal nav-link" href="../../../learn">
                        Learn
                     </a>
                  </li>
                  <li class="toctree-l1 nav-item">
                     <a class="reference internal nav-link" href="../../../compilers">
                        Compilers
                     </a>
                  </li>
                  <li class="toctree-l1 nav-item">
                     <a class="reference internal nav-link" href="../../../community">
                        Community
                     </a>
                  </li>
                  <li class="toctree-l1 nav-item">
                     <a class="reference internal nav-link" href="../../../packages">
                        Packages
                     </a>
                  </li>
                  <li class="toctree-l1 nav-item">
                     <a class="reference internal nav-link" href="../../../news">
                        News
                     </a>
                  </li>
               </ul>
            </div>
         </div>
         <div id="navbar-end">
            <div class="navbar-end-item">

               <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
                  <li class="nav-item">
                     <a class="nav-link" href="https://fortran-lang.discourse.group/" rel="noopener" target="_blank"
                        title="Discourse"><span><i class="fab fa-discourse" style="color:#734f96"></i></span>
                        <label class="sr-only">Discourse</label></a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="https://twitter.com/fortranlang" rel="noopener" target="_blank"
                        title="Twitter"><span><i class="fab fa-twitter" style="color:#734f96"></i></span>
                        <label class="sr-only">Twitter</label></a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="https://github.com/fortran-lang" rel="noopener" target="_blank"
                        title="GitHub"><span><i class="fab fa-github" style="color:#734f96"></i></span>
                        <label class="sr-only">GitHub</label></a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="../../../news/atom.xml" rel="noopener" target="_blank"
                        title="RSS"><span><i class="fas fa-rss" style="color:#734f96"></i></span>
                        <label class="sr-only">RSS</label></a>
                  </li>
               </ul>
            </div>
         </div>
         <form class="bd-search d-flex align-items-center" action="../../../search/index.html"
            method="get"> <i class="icon fas fa-search"></i> <input type="search" class="form-control" name="q"
               id="search-input" placeholder="Search" aria-label="Search" autocomplete="off"> </form>

      </div>
   </div>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://fortran-lang.discourse.group/" rel="noopener" target="_blank" title="Discourse"><span><i class="fab fa-discourse"></i></span>
            <label class="sr-only">Discourse</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/fortranlang" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/fortran-lang" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://fortran-lang.org/news.xml" rel="noopener" target="_blank" title="RSS"><span><i class="fas fa-rss"></i></span>
            <label class="sr-only">RSS</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../build_tools/">
   Build tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compiling_source/">
   Compiling the source code
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../distributing/">
   Distributing your programs
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Include files and modules
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../linking_pieces/">
   Linking the objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../managing_libraries/">
   Managing libraries (static and dynamic libraries)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../project_make/">
   An introduction to make
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../runtime_libraries/">
   Run-time libraries
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      



<br>


<nav id="bd-toc-nav" class="page-toc">
  
</nav>


    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                 <section id="include-files-and-modules">
<h1>Include files and modules<a class="headerlink" href="#include-files-and-modules" title="Permalink to this heading">#</a></h1>
<p>Your program can be contained in various source files, all stored in the
same directory or organised in some convenient directory tree. The
details of the organisation depend on personal taste, arrangements made
by the group of developers you belong to, or simply the history of the
program. Whatever the directory structure is, you will encounter a
situation where the compiler needs assistence in order to compile a
particular source file:</p>
<ul class="simple">
<li><p>Fortran (and other languages) has the possibility to include an
external file. While this feature has become a bit less useful with the
advent of modules, it still has its uses. Quite often, such “include
files” are stored in a directory separated from the directories
containing the source files, because they are used in several locations.
Quite often the name of that directory is “include”.</p></li>
<li><p>As we have seen, compiling source code that defines one or more modules, leads to
the compiler generating so-called “module intermediate files” (with the extension “.mod”).
The compiler needs access to these files to be able to read the interfaces
and variables and what not, and based on this information, actually
compile the source code that uses the various modules.</p></li>
</ul>
<p>Compilers support options like <code class="docutils literal notranslate"><span class="pre">-I</span></code> to indicate where these include
files and module intermediate files are to be found. Suppose we store
the two files of our <code class="docutils literal notranslate"><span class="pre">tabulate</span></code> program in the following directory
structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tabulate</span><span class="o">/</span>
    <span class="n">main</span><span class="o">/</span>
        <span class="n">tabulate</span><span class="o">.</span><span class="n">f90</span>
    <span class="n">sub</span><span class="o">/</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">f90</span>
</pre></div>
</div>
<p>Compiling the file “functions.f90” with the commands</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> sub
$ gfortran -c functions.f90
</pre></div>
</div>
<p>leads to this structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tabulate</span><span class="o">/</span>
    <span class="n">main</span><span class="o">/</span>
        <span class="n">tabulate</span><span class="o">.</span><span class="n">f90</span>
    <span class="n">sub</span><span class="o">/</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">f90</span>
        <span class="n">user_functions</span><span class="o">.</span><span class="n">mod</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">o</span>
</pre></div>
</div>
<p>To successfully compile and subsequently build the program we need to
tell the compiler where it can find the file “user_functions.mod”:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> main
$ gfortran -c tabulate.f90 -I ../sub
$ gfortran -o tabulate tabulate.o ../sub/functions.o
</pre></div>
</div>
<p>The result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tabulate</span><span class="o">/</span>
    <span class="n">main</span><span class="o">/</span>
        <span class="n">tabulate</span><span class="o">.</span><span class="n">f90</span>
        <span class="n">tabulate</span><span class="o">.</span><span class="n">o</span>
        <span class="n">tabulate</span> <span class="p">(</span><span class="ow">or</span> <span class="n">tabulate</span><span class="o">.</span><span class="n">exe</span> <span class="n">on</span> <span class="n">Windows</span><span class="p">)</span>
    <span class="n">sub</span><span class="o">/</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">f90</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">o</span>
        <span class="n">user_functions</span><span class="o">.</span><span class="n">mod</span>
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li><p>The details differ per compiler. Sometimes the <code class="docutils literal notranslate"><span class="pre">-I</span></code> option should be
followed by a space and then the name of the directory, sometimes the
directory should come consecutively.</p></li>
<li><p>By default the module intermediate files (.mod) are put in the
same directory as the object files. When your program code is organised
in different subdirectories, they will get scattered over the directory
tree, complicating the compilation process. Luckily,
many compilers allow you to specify the output location for these
files. For gfortran this is <code class="docutils literal notranslate"><span class="pre">-J</span></code>, for instance:
<code class="docutils literal notranslate"><span class="pre">-J../include</span></code> (so that the .mod files could all appear in the
same directory)</p></li>
<li><p>For large programs, consisting of many source files, it is important to
think through what organisation to use.</p></li>
</ul>
</section>

<div class="section">
   
</div>

              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, Fortran Community.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>